---
import type { CollectionEntry } from "astro:content";
import PostCard from "@components/content/PostCard.astro";
import { getPostUrlBySlug } from "@utils/url-utils";

interface Props {
    page: {
        data: CollectionEntry<"posts">[];
    };
}

const { page }: Props = Astro.props;

let delay = 0;
const interval = 50;
---

<div
    class="transition flex flex-col rounded-(--radius-large) bg-(--card-bg) py-1 md:py-0 md:bg-transparent md:gap-4 mb-4"
>
    {
        page.data.map((entry) => (
            <PostCard
                entry={entry}
                title={entry.data.title}
                tags={entry.data.tags}
                category={entry.data.category}
                published={entry.data.published}
                updated={entry.data.updated}
                url={getPostUrlBySlug(entry.id)}
                image={entry.data.image}
                description={entry.data.description}
                draft={entry.data.draft}
                pinned={entry.data.pinned}
                class:list="onload-animation"
                style={`animation-delay: calc(var(--content-delay) + ${delay++ * interval}ms);`}
            />
        ))
    }
</div>
